<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music App</title>
    <link rel="stylesheet" href="styles.css"> <!-- Link to your CSS -->

    <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAF8R4iNFv3oAZVOZcw5fWUPz8FScTeBXM",
            authDomain: "musicapp-3a435.firebaseapp.com",
            databaseURL: "https://musicapp-3a435-default-rtdb.firebaseio.com",
            projectId: "musicapp-3a435",
            storageBucket: "musicapp-3a435.appspot.com",
            messagingSenderId: "224181252004",
            appId: "1:224181252004:web:4589e9da0d6400e5fd1b31",
            measurementId: "G-FY5VPQG5NZ"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const database = getDatabase(app);
        const provider = new GoogleAuthProvider();

        // Sign in with Google
        function signIn() {
            signInWithPopup(auth, provider)
                .then((result) => {
                    console.log("‚úÖ Signed in:", result.user.displayName);
                    document.getElementById("user-info").innerText = `Logged in as: ${result.user.displayName}`;
                })
                .catch((error) => {
                    console.error("‚ùå Sign-in Error:", error);
                });
        }

        // Sign out
        function signOutUser() {
            signOut(auth)
                .then(() => {
                    console.log("‚úÖ User signed out");
                    document.getElementById("user-info").innerText = "Not logged in";
                })
                .catch((error) => {
                    console.error("‚ùå Sign-out Error:", error);
                });
        }

        // Check authentication state
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("‚úÖ User is signed in:", user.displayName);
                document.getElementById("user-info").innerText = `Logged in as: ${user.displayName}`;
            } else {
                console.log("üö´ No user signed in.");
                document.getElementById("user-info").innerText = "Not logged in";
            }
        });

        // YouTube Player Controls
        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '360',
                width: '640',
                videoId: 'dQw4w9WgXcQ', // Default video (change this)
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            console.log("üéµ YouTube Player Ready");
        }

        function playVideo() {
            if (player) player.playVideo();
        }

        function pauseVideo() {
            if (player) player.pauseVideo();
        }

        // Make functions globally accessible
        window.signIn = signIn;
        window.signOutUser = signOutUser;
        window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;
        window.playVideo = playVideo;
        window.pauseVideo = pauseVideo;
    </script>
    <script src="https://www.youtube.com/iframe_api"></script> <!-- YouTube API -->
</head>
<body>
    <h1>Music App</h1>

    <!-- User Info -->
    <p id="user-info">Not logged in</p>
    
    <!-- Authentication Buttons -->
    <button onclick="signIn()">Sign in with Google</button>
    <button onclick="signOutUser()">Sign Out</button>

    <!-- YouTube Player -->
    <h2>Now Playing</h2>
    <div id="youtube-player"></div>
    <button onclick="playVideo()">‚ñ∂ Play</button>
    <button onclick="pauseVideo()">‚è∏ Pause</button>

</body>
</html>
